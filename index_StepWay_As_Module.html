<!DOCTYPE html>
<html lang="en" ng-app="appDemo">
	<head>
		<title>Easy form generator</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		<meta name="description" content="create amazing forms without coding : form editor based on angular formly">
		<meta name="author" content="Erwan Datin (MacKentoch)">
		<!-- IMPORTANT : angular js lib (here for better result with ng-cloak) -->
		<script type="text/javascript" src="./public/lib/js/angular.min.js"></script>	
		<!-- Bootstrap core CSS -->
		<link href="./public/lib/css/bootstrap.min.css" rel="stylesheet">		
		<!-- <link href="/public/lib/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet"> -->
		<!-- font-awesome -->
		<link href="./public/lib/css/font-awesome.min.css" rel="stylesheet">
		<!-- animate -->
		<link href="./public/lib/css/animate.min.css" rel="stylesheet">
		<!-- angular loading bar css-->
		<!-- <link href="./public/lib/css/loading-bar.min.css" rel="stylesheet"> -->
		<!-- angulat loading bar js -->
		<!-- <script type="text/javascript" src="./public/lib/js/loading-bar.min.js"></script> -->
		<!-- textAngular -->
		<link rel='stylesheet' href='./public/lib/css/textAngular.min.css'>		
		<!-- taoster angular -->
		<link rel='stylesheet' href='./public/lib/css/toaster.min.css'>		
		<!-- nya select bootstrap -->
		<link rel='stylesheet' href='./public/lib/css/nya-bs-select.min.css'>	
		<!-- Custom styles for this template -->
		<link href="./public/css/eda.stepway.css" rel="stylesheet">
		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="./public/lib/html5shiv/dist/html5shiv.min.js"></script>
			<script src="./public/lib/respondJS/dest/respond.min.js"></script>
		<![endif]-->		
	</head>
	<!-- NOTE : ng-cloak here is not optimal solution : better to use it only where it is needed (I just take a shortcut as this an example not a production sample)  -->
	<body ng-controller="demoController as demoCtrl" ng-cloak>
		<div>
			<!-- navigation : just decoration it is not easy form generator
			=============================================================-->
			<header id="pageHeader" >	
				<div class="navbar navbar-default navbar-fixed-top">
			      <div class="container">
			        <div class="navbar-header">
			          <a class="navbar-brand" href="#">Easy form generator</a>
			          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
			            <span class="icon-bar"></span>
			            <span class="icon-bar"></span>
			            <span class="icon-bar"></span>
			          </button>
			        </div>
			        <div class="navbar-collapse collapse" id="navbar-main">
			          <ul class="nav navbar-nav">
			          </ul>
			          <ul class="nav navbar-nav navbar-right">
			          	<li><a class="socialIcon" target="_blank" href="https://github.com/MacKentoch"><span class="text-center"><i class="fa fa-github"></i></span></a></li>
			          	<li><a class="socialIcon" target="_blank" href="https://twitter.com/erwan_datin"><span class="text-center"><i class="fa fa-twitter"></i></span></a></li>
			          </ul>
			        </div>
			      </div>
			    </div>
			</header>   		

			<!-- Easy Form Generator (here step way) is now a ridiculous small html :
			=============================================================-->
			<eda-step-way-easy-form-gen 	
						eda-easy-form-generator-model="demoCtrl.easyFormGeneratorModel"
						eda-save-form-event="demoCtrl.saveForm(easyFormModel, formlyModel)">
			</eda-step-way-easy-form-gen>

		</div>	



		<script type="text/javascript">
			//demo purpose : here should be your app
			
			//just inject easy form generator and bind properties
			//then, 
			
			(function(){
				'use strict';
				angular
					.module('appDemo', [
						'ngwfApp' //injects easy form generator
					])
					.controller('demoController', demoController);
					
				demoController.$inject = ['$timeout'];	
				function demoController($timeout){
					var demoCtrl = this;

					demoCtrl.easyFormGeneratorModel	  = initEasyFormGeneratorModel();
					demoCtrl.saveForm = saveForm;
	
					//testing purpose : fields model :
					demoCtrl.testHeader 				= testHeader();
					demoCtrl.testSubTitle 			= testSubTitle();
					
					demoCtrl.basicTextInput 		= basicTextInput();
					demoCtrl.passwordInput 			= passwordInput();
					demoCtrl.testADateInput 		= testADateInput();
					demoCtrl.testtAnEmailInput 	= testtAnEmailInput();
					
					demoCtrl.testACompleteForm 	= testACompleteForm();
					
					
					
					//demo purpose, in 3 seconds a new form will be bound to easy form generator :
					//magic happens then and you see the form described in the timeout  
					timedModelChanged();
					
				
				
				
					
					/**
					 * when click on save form, will call your save form function :
					 */
					function saveForm(easyFormGeneratorModel){
						console.info('-> can handle save models to database here (your controller)');	
						console.dir({
								'easyFormGeneratorModel' : easyFormGeneratorModel
						});
						
						//_ You can save to your database _
						//1- just JSON.stringify these models
						//var stringifiedFieldsModel 	= JSON.stringify(easyFormModel.fieldsModel);
						//var stringifiedDataModel 		= JSON.stringify(easyFormModel.dataModel);
						
						
						//2- send all to your database -> it is done!
						//var formnameToSave 					= demoCtrl.FormNameAsTest;
						//var submitButtonTextTosave 	= demoCtrl.FormNameAsTest;
					}				
				
					
					
					/**
					 * as suggestion : returns an initial model
					 * 
					 * it shows easy form generator properties 
					 * - formName 					: {string} (at save step you name your form)
					 * - btnSubmitText 			: {string} (if 'Submit' does not suits to you change submit button name)
					 * - btnCancelText			: {string} (if 'Cancel' does not suits to you change cancel button name)
					 * - edaFieldsModel 		: {array} - easy form generator model that describe form
					 * - formlyFieldsModel 	: {object} - easy form generator model translate by itself 'edaFieldsModel' to 'angular formly fields model' -> usefull is you just need a formly model 
					 * - dataModel					: {object} - pre-populate your form - this object is filled when filling form. 
					 * 
					 * if you don't need to pre-populate easy form generator just init an empty object.
					 * (NOTE : if you only need to create forms : save event will bring you easy form generator model)
					 */
					function initEasyFormGeneratorModel(){
						var initModel = {
							formName      		: 'DemoForm',
							btnSubmitText 		: 'I Confirm',
							btnCancelText 		: 'I give up',
							edaFieldsModel   	:	[],
							formlyFieldsModel : {},							
							dataModel     		: {}							
						};
						return initModel;
					}
					
					
					function timedModelChanged(){
						$timeout(function(){
							
							demoCtrl
								.easyFormGeneratorModel
								.edaFieldsModel = demoCtrl.passwordInput;

							console.info('timeout model change');
							console.dir(demoCtrl.easyFormGeneratorModel);
						}, 3000);
					}
					/**
					 * VALUDATION CONTROL BY CONTROL (SUMMARY)
					 * - header 					: OK
					 * - subtitle 				: OK
					 * - basic textinput 	: OK
					 * - password input 	: OK
					 * - date 						: OK
					 * - email 						: KO
					 * 
					 * 
					 */
					
					function basicTextInput(){
						var _basicTextInput =  [
							{
								"line": 1,
								"activeColumn": 1,
								"columns": [
									{
										"numColumn": 1,
										"exist": true,
										"control": {
											"type": "input",
											"key": "input-1441480221074",
											"selectedControl": "TextInput",
											"subtype": "",
											"templateOptions": {
												"label": "text input (basic)",
												"required": true,
												"description": "text input (basic)",
												"placeholder": "text input (basic)",
												"options": []
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {},
											"formlyValidation": {
												"messages": {}
											},
											"edited": true
										}
									}
								]
							}
						];
						return _basicTextInput;
						
					}
					
					function passwordInput(){
						var _passwordInput = 	[
								{
									"line": 1,
									"activeColumn": 1,
									"columns": [
										{
											"numColumn": 1,
											"exist": true,
											"control": {
												"type": "input",
												"key": "input-1441480929475",
												"selectedControl": "Password",
												"subtype": "password",
												"templateOptions": {
													"label": "password",
													"required": true,
													"description": "password",
													"placeholder": "password",
													"options": []
												},
												"formlyExpressionProperties": {},
												"formlyValidators": {},
												"formlyValidation": {
													"messages": {}
												},
												"edited": true
											}
										}
									]
								}
							];
						return _passwordInput;
					}
					
					/**
					 * something's wrong with email
					 * NEED TO FIX
					 */
					function testtAnEmailInput(){
						var emailForm = [
							{
								"line": 1,
								"activeColumn": 1,
								"columns": [
									{
										"numColumn": 1,
										"exist": true,
										"control": {
											"type": "input",
											"key": "input-1441457012642",
											"selectedControl": "Email",
											"subtype": "email",
											"templateOptions": {
												"label": "Email",
												"required": true,
												"description": "Email",
												"placeholder": "Email",
												"options": []
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {
												"emailShape": {
													"message": "$viewValue + ' is not a valid email'"
												}
											},
											"formlyValidation": {
												"messages": {}
											},
											"edited": true
										}
									}
								]
							}
						];
						return emailForm;
					}
					
					function testHeader(){
						var headerInput =  [
							{
								"line": 1,
								"activeColumn": 1,
								"columns": [
									{
										"numColumn": 1,
										"exist": true,
										"control": {
											"type": "header",
											"key": "header-1441457775359",
											"selectedControl": "Header",
											"subtype": "",
											"templateOptions": {
												"label": "",
												"required": false,
												"description": "test",
												"placeholder": "",
												"options": []
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {},
											"formlyValidation": {},
											"edited": true
										}
									}
								]
							}
						]; 
						return headerInput;
					}
					
					function testSubTitle(){
						var subtitleCtrl = 
						[
							{
								"line": 1,
								"activeColumn": 1,
								"columns": [
									{
										"numColumn": 1,
										"exist": true,
										"control": {
											"type": "subTitle",
											"key": "subTitle-1441457936065",
											"selectedControl": "Subtitle",
											"subtype": "",
											"templateOptions": {
												"label": "",
												"required": false,
												"description": "",
												"placeholder": "Subtitle for test",
												"options": []
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {},
											"formlyValidation": {},
											"edited": true
										}
									}
								]
							}
						];
						return subtitleCtrl;
						
					}
				
					function testADateInput(){
						var dateInput = [
							{
								"line": 1,
								"activeColumn": 1,
								"columns": [
									{
										"numColumn": 1,
										"exist": true,
										"control": {
											"type": "datepicker",
											"key": "datepicker-1441457561268",
											"selectedControl": "Date",
											"subtype": "",
											"templateOptions": {
												"label": "Date",
												"required": true,
												"description": "Date",
												"placeholder": "",
												"options": [],
												"datepickerPopup": "dd-MMMM-yyyy"
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {},
											"formlyValidation": {
												"messages": {}
											},
											"edited": true
										}
									}
								]
							}
						];
						return dateInput;
					}
					
					
					function testACompleteForm(){
						var _testACompleteForm =  [
							{
								"line": 1,
								"activeColumn": 1,
								"columns": [
									{
										"numColumn": 1,
										"exist": true,
										"control": {
											"type": "header",
											"key": "header-1441426238190",
											"selectedControl": "Header",
											"subtype": "",
											"templateOptions": {
												"label": "",
												"required": false,
												"description": "Anther Loaded Form",
												"placeholder": "",
												"options": []
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {},
											"formlyValidation": {},
											"edited": true
										}
									}
								]
							},
							{
								"line": -1,
								"activeColumn": 1,
								"columns": [
									{
										"numColumn": 1,
										"exist": true,
										"control": {
											"type": "input",
											"key": "input-1441426278314",
											"selectedControl": "TextInput",
											"subtype": "",
											"templateOptions": {
												"label": "text input",
												"required": true,
												"description": "text input",
												"placeholder": "text input",
												"options": []
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {},
											"formlyValidation": {
												"messages": {}
											},
											"edited": true
										}
									},
									{
										"numColumn": 2,
										"exist": true,
										"control": {
											"type": "input",
											"key": "input-1441426295927",
											"selectedControl": "Password",
											"subtype": "password",
											"templateOptions": {
												"label": "password",
												"required": true,
												"description": "password",
												"placeholder": "password",
												"options": []
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {},
											"formlyValidation": {
												"messages": {}
											},
											"edited": true
										}
									},
									{
										"numColumn": 3,
										"exist": true,
										"control": {
											"type": "input",
											"key": "input-1441426313388",
											"selectedControl": "Email",
											"subtype": "email",
											"templateOptions": {
												"label": "email",
												"required": true,
												"description": "email",
												"placeholder": "email",
												"options": []
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {
												"emailShape": {
													"message": "$viewValue + ' is not a valid email'"
												}
											},
											"formlyValidation": {
												"messages": {}
											},
											"edited": true
										}
									}
								]
							},
							{
								"line": -1,
								"activeColumn": 1,
								"columns": [
									{
										"numColumn": 1,
										"exist": true,
										"control": {
											"type": "datepicker",
											"key": "datepicker-1441426325143",
											"selectedControl": "Date",
											"subtype": "",
											"templateOptions": {
												"label": "date",
												"required": true,
												"description": "date",
												"placeholder": "",
												"options": [],
												"datepickerPopup": "dd-MMMM-yyyy"
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {},
											"formlyValidation": {
												"messages": {}
											},
											"edited": true
										}
									},
									{
										"numColumn": 2,
										"exist": true,
										"control": {
											"type": "basicSelect",
											"key": "basicSelect-1441426346817",
											"selectedControl": "BasicSelect",
											"subtype": "",
											"templateOptions": {
												"label": "",
												"required": false,
												"description": "",
												"placeholder": "",
												"options": [
													{
														"name": "opt1",
														"value": 0,
														"group": ""
													},
													{
														"name": "opt2",
														"value": 1,
														"group": ""
													},
													{
														"name": "opt3",
														"value": 2,
														"group": ""
													}
												]
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {},
											"formlyValidation": {
												"messages": {}
											},
											"edited": true
										}
									}
								]
							},
							{
								"line": -1,
								"activeColumn": 1,
								"columns": [
									{
										"numColumn": 1,
										"exist": true,
										"control": {
											"type": "richEditor",
											"key": "richEditor-1441426365355",
											"selectedControl": "RichTextEditor",
											"subtype": "",
											"templateOptions": {
												"label": "",
												"required": false,
												"description": "",
												"placeholder": "",
												"options": []
											},
											"formlyExpressionProperties": {},
											"formlyValidators": {},
											"formlyValidation": {
												"messages": {}
											},
											"edited": true
										}
									}
								]
							}
						]
						return _testACompleteForm;
					}
					
					
					
					
				}		
			})();
		</script>
	
		<!-- footer : declare JS dependencies
		=============================================================-->
		<footer id="pageFooter">
			<!-- jquery framework : top 1 priority -->
			<script type="text/javascript" src="./public/lib/js/jquery.min.js"></script>
			<!-- bootstrap framework scripts -->
			<script type="text/javascript" src="./public/lib/js/bootstrap.min.js"></script>
			<!-- angular ui bootstrap -->
			<script type="text/javascript" src="./public/lib/js/ui-bootstrap-tpls.min.js"></script>
			<!-- angular app all concatenated here (app, controllers directives, containers ...) -->
			<script type="text/javascript" src="./public/js/eda.stepway.js"></script>
			<!-- textAngular Includes -->
			<script src='./public/lib/js/textAngular-rangy.min.js'></script>
			<script src='./public/lib/js/textAngular-sanitize.min.js'></script>
			<script src='./public/lib/js/textAngular.min.js'></script> 
			<!-- lodash -->
			<script src='./public/lib/js/lodash.min.js'></script> 
			<script type="text/javascript" src="./public/lib/js/angular-resource.min.js"></script>
			<!-- angular animate -->
			<script type="text/javascript" src="./public/lib/js/angular-animate.min.js"></script>
			<!-- angular toaster -->
			<script type="text/javascript" src="./public/lib/js/toaster.min.js"></script>
			<!-- nya select bootstrap -->		
			<script type="text/javascript" src="./public/lib/js/nya-bs-select.min.js"></script>
			<!--  api-check = formly needed : IMPORTANT : always before formly -->
			<script type="text/javascript" src="./public/lib/js/api-check.min.js"></script> 
			<!-- angular formly -->
			<script type="text/javascript" src="./public/lib/js/formly.min.js"></script> 
			<!-- angular formly template bootstrap -->
			<script type="text/javascript" src="./public/lib/js/angular-formly-templates-bootstrap.min.js"></script>
			<!-- angular messages --> 
			<script type="text/javascript" src="./public/lib/js/angular-messages.min.js"></script>
		</footer>

	</body>
</html>








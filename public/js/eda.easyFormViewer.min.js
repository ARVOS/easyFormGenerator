!function(){"use strict";!function(){angular.module("eda.easyFormViewer",["textAngular","formly","formlyBootstrap","ui.bootstrap","nya.bootstrap.select","eda.easyFormViewer.Directive","eda.modelsTranslator.Service"])}(),function(){function e(e){function o(e){return e=e.replace(/[-_s]+(.)?/g,function(e,o){return o?o.toUpperCase():""}),e.replace(/^([A-Z])/,function(e,o){return o?o.toLowerCase():""})}e.setType({name:"richEditor",template:'<text-angular class="richTextAngular" ng-model="model[options.key || index]"></text-angular>'}),e.setType({name:"blank",template:"<div></div>"});var n='<div class="row"><div class=""><h4 class="text-center">{{options.templateOptions.placeholder}}<h4><hr/></div></div>';e.setType({name:"subTitle",template:n});var t=' <ol   class="nya-bs-select col-sm-12 col-xs-12 col-md-12 col-lg12"    ng-model="model[options.key || index]"     id="{{id}}"     disabled="options.templateOptions.options.length === 0">    <li class="nya-bs-option" nya-bs-option="option in options.templateOptions.options">      <a>{{option.name}}</a>    </li>  </ol>     ';e.setType({name:"basicSelect",template:t});var l='  <ol class="nya-bs-select col-sm-12 col-xs-12 col-md-12 col-lg12"     ng-model="model[options.key || index]"        data-live-search="true"        disabled="options.templateOptions.options.length === 0">       <li nya-bs-option="option in  options.templateOptions.options group by option.group"         >         <span class="dropdown-header">{{$group}}</span>         <a>           <span>{{option.name}}</span>           <span class="glyphicon glyphicon-ok check-mark"></span>         </a>       </li>     </ol>';e.setType({name:"groupedSelect",template:l});var r=["date-disabled","custom-class","show-weeks","starting-day","init-date","min-mode","max-mode","format-day","format-month","format-year","format-day-header","format-day-title","format-month-title","year-range","shortcut-propagation","datepicker-popup","show-button-bar","current-text","clear-text","close-text","close-on-date-selection","datepicker-append-to-body"],i=["datepicker-mode","min-date","max-date"],s={};angular.forEach(r,function(e){s[o(e)]={attribute:e}}),angular.forEach(i,function(e){s[o(e)]={bound:e}}),e.setType({name:"datepicker",template:'<input  id="{{id}}" class="form-control" ng-click="open($event)" ng-model="model[options.key  || index]" is-open="to.isOpen" ng-click="to.isOpen = true" datepicker-options="to.datepickerOptions" />',wrapper:["bootstrapLabel","bootstrapHasError"],controller:["$scope",function(e){e.open=function(o){o.preventDefault(),o.stopPropagation(),e.opened=!0}}],defaultOptions:{ngModelAttrs:s,templateOptions:{addonLeft:{"class":"glyphicon glyphicon-calendar",onClick:function(e,o){e.templateOptions.isOpen=!e.templateOptions.isOpen}},onFocus:function(e,o,n){n.to.isOpen=!n.to.isOpen},datepickerOptions:{}}}})}angular.module("eda.easyFormViewer").config(e)}(),angular.module("eda.easyFormViewer").run(["$templateCache",function(e){e.put("eda.easyFormViewer.Template.html",'<div class=easyFormViewer><form ng-submit=vm.onSubmit() name=vm.form novalidate=""><formly-form model=vm.model fields=vm.fields options=vm.options form=vm.form><button type=submit class="btn btn-primary submit-button pull-right" ng-disabled=vm.form.$invalid>{{vm.submitText}}</button> <button type=button class="btn btn-primary pull-right" ng-click=vm.options.resetModel()>{{vm.cancelText}}</button></formly-form></form></div>')}]),function(){function e(e){function o(o,n,t){function l(){return o.edaEasyFormViewerEasyFormGeneratorFieldsModel}function r(e,n){console.info("fieldsModel Changed"),console.dir(e),o.vm.fields=s(e),console.dir(o.vm.fields)}function i(){var e=angular.isArray(o.edaEasyFormViewerEasyFormGeneratorFieldsModel)?s(o.edaEasyFormViewerEasyFormGeneratorFieldsModel):{};return e}function s(n){if(angular.isArray(n)){var t=a(n),l=[];return o.configurationLoaded={},e.bindConfigurationLines(o.configurationLoaded,t),console.dir({"scope.configurationLoaded":o.configurationLoaded}),e.refreshControlFormlyExpressionProperties(o.configurationLoaded),e.refreshControlFormlyValidators(o.configurationLoaded),e.refreshControlFormlyValidation(o.configurationLoaded),o.configuration=angular.copy(o.configurationLoaded),e.applyConfigurationToformlyModel(o.configurationLoaded,l,o.vm.model),l}}function a(e){var o=angular.isArray(e)&&e.length>0?e:c();return o}function c(){var e=[{line:1,activeColumn:1,columns:[{numColumn:1,exist:!0,control:{type:"none",key:"none"}}]}];return e}console.info("edaEasyFormViewer directive loaded"),o.vm.model={},o.vm.fields=i(),o.vm.submitText="Submit",o.vm.cancelText="Cancel",o.$watch(l,r,!0)}function n(){var e=this;e.model={},e.fields={},e.submitText="Submit",e.cancelText="Cancel"}var t={restrict:"E",scope:{edaEasyFormViewerDataModel:"=?",edaEasyFormViewerEasyFormGeneratorFieldsModel:"=?",edaEasyFormViewerSubmitButtonText:"=?",edaEasyFormViewerCancelButtonText:"=?",edaEasyFormViewerSubmitFormEvent:"&?",edaEasyFormViewerCancelFormEvent:"&?"},replace:!1,controller:n,controllerAs:"vm",templateUrl:"eda.easyFormViewer.Template.html",link:o};return t}angular.module("eda.easyFormViewer.Directive",[]).directive("edaEasyFormViewer",e),e.$inject=["modelsTranslator"]}(),function(){function e(){var e={initNyaSelect:o,getControlsDefinition:n,refreshControlFormlyExpressionProperties:t,refreshControlFormlyValidators:l,refreshControlFormlyValidation:r,initConfigurationEditFromScratch:s,bindConfigurationLines:a,applyConfigurationToformlyModel:c};return e}function o(e){return i(e)}function n(){var e={};return i(e),e}function t(e){angular.isObject(e)&&angular.forEach(e.lines,function(e,o){angular.forEach(e.columns,function(e,o){var t=n();angular.forEach(t.controls,function(o,n){e.control.type===o.formlyType&&e.control.subtype===o.formlySubtype&&(e.control.formlyExpressionProperties=o.formlyExpressionProperties)})})})}function l(e){angular.isObject(e)&&angular.forEach(e.lines,function(e,o){angular.forEach(e.columns,function(e,o){var t=n();angular.forEach(t.controls,function(o,n){e.control.type===o.formlyType&&e.control.subtype===o.formlySubtype&&(e.control.formlyValidators=o.formlyValidators)})})})}function r(e){angular.isObject(e)&&angular.forEach(e.lines,function(e,o){angular.forEach(e.columns,function(e,o){var t=n();angular.forEach(t.controls,function(o,n){e.control.type===o.formlyType&&e.control.subtype===o.formlySubtype&&(e.control.formlyValidation=o.formlyValidation)})})})}function i(e){var o={controls:[{id:"empty",name:"no control",subtitle:"no control",group:"Blank",formlyType:"blank",formlySubtype:"",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{}},{id:"Header",name:"Header",subtitle:"no control",group:"Decoration",formlyType:"header",formlySubtype:"",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{}},{id:"Subtitle",name:"Subtitle",subtitle:"no control",group:"Decoration",formlyType:"subTitle",formlySubtype:"",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{}},{id:"TextInput",name:"Text input",subtitle:"Text input",group:"input",formlyType:"input",formlySubtype:"",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{messages:{required:function(e,o,n){var t="this Text input field is required",l="undefined"!=typeof n.to.label&&""!==n.to.label?n.to.label+" is required":t;return l}}}},{id:"Password",name:"Password",subtitle:"Password",group:"input",formlyType:"input",formlySubtype:"password",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{messages:{required:function(e,o,n){var t="this Password field is required",l="undefined"!=typeof n.to.label&&""!==n.to.label?n.to.label+" is required":t;return l}}}},{id:"Email",name:"Email",subtitle:"Email",group:"input",formlyType:"input",formlySubtype:"email",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{emailShape:{expression:function(e,o){var n=o||e;return/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/.test(n)},message:"$viewValue + ' is not a valid email'"}},formlyValidation:{messages:{required:function(e,o,n){var t="this Email field is required",l="undefined"!=typeof n.to.label&&""!==n.to.label?n.to.label+" is required":t;return n.to.required?l:void 0}}}},{id:"Date",name:"Date",subtitle:"Date",group:"input",formlyType:"datepicker",formlySubtype:"",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],datepickerPopup:"dd-MMMM-yyyy",formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{messages:{required:function(e,o,n){var t="this Date field is required",l="undefined"!=typeof n.to.label&&""!==n.to.label?n.to.label+" is required":t;return l}}}},{id:"Texarea",name:"Textarea",subtitle:"Textarea",group:"Textarea",formlyType:"textarea",formlySubtype:"",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{messages:{required:function(e,o,n){var t="this Textarea field is required",l="undefined"!=typeof n.to.label&&""!==n.to.label?n.to.label+" is required":t;return l}}}},{id:"RichTextEditor",name:"RichTextEditor",subtitle:"RichTextEditor",group:"Textarea",formlyType:"richEditor",formlySubtype:"",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{messages:{required:function(e,o,n){var t="this RichTextEditor field is required",l="undefined"!=typeof n.to.label&&""!==n.to.label?n.to.label+" is required":t;return l}}}},{id:"Radio",name:"Radio",subtitle:"Radio",options:[],group:"Radio",formlyType:"radio",formlySubtype:"",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{messages:{required:function(e,o,n){var t="this Password field is required",l="undefined"!=typeof n.to.label&&""!==n.to.label?n.to.label+" is required":t;return l}}}},{id:"Checkbox",name:"Checkbox",subtitle:"Checkbox",group:"Checkbox",formlyType:"checkbox",formlySubtype:"",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{messages:{required:function(e,o,n){var t="this Checkbox field is required",l="undefined"!=typeof n.to.label&&""!==n.to.label?n.to.label+" is required":t;return l}}}},{id:"BasicSelect",name:"Basic select",subtitle:"Basic select",options:[],group:"Select",formlyType:"basicSelect",formlySubtype:"",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{messages:{required:function(e,o,n){var t="this Basic select field is required",l="undefined"!=typeof n.to.label&&""!==n.to.label?n.to.label+" is required":t;return l}}}},{id:"GroupedSelect",name:"Grouped Select",subtitle:"Grouped Select",options:[],group:"Select",formlyType:"groupedSelect",formlySubtype:"",formlyLabel:"",formlyRequired:!1,formlyDesciption:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{messages:{required:function(e,o,n){var t="this Grouped Select field is required",l="undefined"!=typeof n.to.label&&""!==n.to.label?n.to.label+" is required":t;return l}}}}],selectedControl:"none",temporyConfig:{selectedControl:"none",formlyLabel:"label",formlyRequired:!1,formlyDesciption:"",formlyPlaceholder:"",formlyOptions:[],formlyExpressionProperties:{},formlyValidators:{},formlyValidation:{}}};return angular.copy(o,e),!0}function s(e){var o={activeLine:1,listConfigStep:["init","first","second","third"],stepIndicators:[!0,!1,!1,!1],configStepCounter:0,submitButtonText:"submit",cancelButtonText:"cancel",lines:[{line:1,activeColumn:1,columns:[{numColumn:1,exist:!0,control:{type:"none",key:"none"}}]}]};angular.copy(o,e)}function a(e,o){if("[object Array]"===Object.prototype.toString.call(o)){var n={activeLine:1,listConfigStep:["init","first","second","third"],stepIndicators:[!0,!1,!1,!1],configStepCounter:0,submitButtonText:"submit",cancelButtonText:"cancel",lines:[]};return n.lines=[].concat(o),angular.copy(n,e),S("configuration model is bound","lines are bound to configuration model.")}return w("lines is not an array","Checks lines type, it is not an array.")}function c(e,o,n){u(o),q(n);for(var t=e.lines.length,l=0;t>l;l++)1===e.lines[l].columns.length&&("header"===e.lines[l].columns[0].control.type?p(o,e,l):d(o,e,l)),2===e.lines[l].columns.length&&f(o,e,l),3===e.lines[l].columns.length&&y(o,e,l)}function u(e){var o=[];angular.copy(o,e)}function p(e,o,n){var t='<div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><h2 class="text-center">'+T(o.lines[n].columns[0].control)+"<h2></div></div><hr/>";e.push({template:"undefined"!=typeof o.lines[n].columns[0].control.type&&"header"===o.lines[n].columns[0].control.type?t:"<div></div>"})}function m(e,o,n){e.templateOptions.datepickerPopup=v(o.lines[n].columns[0].control)}function d(e,o,n){var t={className:"col-xs-12",type:"undefined"!=typeof o.lines[n].columns[0].control.type?"none"===o.lines[n].columns[0].control.type?"blank":o.lines[n].columns[0].control.type:"blank",key:"undefined"!=typeof o.lines[n].columns[0].control.key?o.lines[n].columns[0].control.key:"blank"+Date.now(),templateOptions:{type:O(o.lines[n].columns[0].control),label:b(o.lines[n].columns[0].control),required:k(o.lines[n].columns[0].control),placeholder:V(o.lines[n].columns[0].control),description:T(o.lines[n].columns[0].control),options:E(o.lines[n].columns[0].control)},expressionProperties:g(o.lines[n].columns[0].control),validators:h(o.lines[n].columns[0].control),validation:x(o.lines[n].columns[0].control)};"datepicker"===o.lines[n].columns[0].control.type&&m(t,o,n),e.push(t)}function f(e,o,n){var t={className:"col-xs-6",template:'<div class="row"><div class=""><h2 class="text-center">'+T(o.lines[n].columns[0].control)+"<h2><hr/></div></div>"},l={className:"col-xs-6",template:'<div class="row"><div class=""><h2 class="text-center">'+T(o.lines[n].columns[1].control)+"<h2><hr/></div></div>"},r={className:"col-xs-6",type:"undefined"!=typeof o.lines[n].columns[0].control.type?"none"===o.lines[n].columns[0].control.type?"blank":o.lines[n].columns[0].control.type:"blank",key:"undefined"!=typeof o.lines[n].columns[0].control.key?o.lines[n].columns[0].control.key:"blank"+Date.now(),templateOptions:{type:O(o.lines[n].columns[0].control),label:b(o.lines[n].columns[0].control),required:k(o.lines[n].columns[0].control),placeholder:V(o.lines[n].columns[0].control),description:T(o.lines[n].columns[0].control),options:E(o.lines[n].columns[0].control)},expressionProperties:g(o.lines[n].columns[0].control),validators:h(o.lines[n].columns[0].control),validation:x(o.lines[n].columns[0].control)};"datepicker"===o.lines[n].columns[0].control.type&&m(r,o,n);var i={className:"col-xs-6",type:"undefined"!=typeof o.lines[n].columns[1].control.type?"none"===o.lines[n].columns[1].control.type?"blank":o.lines[n].columns[1].control.type:"blank",key:"undefined"!=typeof o.lines[n].columns[1].control.key?o.lines[n].columns[1].control.key:"blank"+Date.now(),templateOptions:{type:O(o.lines[n].columns[1].control),label:b(o.lines[n].columns[1].control),required:k(o.lines[n].columns[1].control),placeholder:V(o.lines[n].columns[1].control),description:T(o.lines[n].columns[1].control),options:E(o.lines[n].columns[1].control)},expressionProperties:g(o.lines[n].columns[1].control),validators:h(o.lines[n].columns[1].control),validation:x(o.lines[n].columns[1].control)};"datepicker"===o.lines[n].columns[1].control.type&&m(i,o,n);var s=[];s.push("header"===o.lines[n].columns[0].control.type?t:r),s.push("header"===o.lines[n].columns[1].control.type?l:i),e.push({className:"row",fieldGroup:s})}function y(e,o,n){var t={className:"col-xs-4",template:'<div class="row"><div class=""><h2 class="text-center">'+T(o.lines[n].columns[0].control)+"<h2><hr/></div></div>"},l={className:"col-xs-4",template:'<div class="row"><div class=""><h2 class="text-center">'+T(o.lines[n].columns[1].control)+"<h2><hr/></div></div>"},r={className:"col-xs-4",template:'<div class="row"><div class=""><h2 class="text-center">'+T(o.lines[n].columns[2].control)+"<h2><hr/></div></div>"},i={className:"col-xs-4",type:"undefined"!=typeof o.lines[n].columns[0].control.type?"none"===o.lines[n].columns[0].control.type?"blank":o.lines[n].columns[0].control.type:"blank",key:"undefined"!=typeof o.lines[n].columns[0].control.key?o.lines[n].columns[0].control.key:"blank"+Date.now(),templateOptions:{type:O(o.lines[n].columns[0].control),label:b(o.lines[n].columns[0].control),required:k(o.lines[n].columns[0].control),placeholder:V(o.lines[n].columns[0].control),description:T(o.lines[n].columns[0].control),options:E(o.lines[n].columns[0].control)},expressionProperties:g(o.lines[n].columns[0].control),validators:h(o.lines[n].columns[0].control),validation:x(o.lines[n].columns[0].control)};"datepicker"===o.lines[n].columns[0].control.type&&m(i,o,n);var s={className:"col-xs-4",type:"undefined"!=typeof o.lines[n].columns[1].control.type?"none"===o.lines[n].columns[1].control.type?"blank":o.lines[n].columns[1].control.type:"blank",key:"undefined"!=typeof o.lines[n].columns[1].control.key?o.lines[n].columns[1].control.key:"blank"+Date.now(),templateOptions:{type:O(o.lines[n].columns[1].control),label:b(o.lines[n].columns[1].control),required:k(o.lines[n].columns[1].control),placeholder:V(o.lines[n].columns[1].control),description:T(o.lines[n].columns[1].control),options:E(o.lines[n].columns[1].control)},expressionProperties:g(o.lines[n].columns[1].control),validators:h(o.lines[n].columns[1].control),validation:x(o.lines[n].columns[1].control)};"datepicker"===o.lines[n].columns[1].control.type&&m(s,o,n);var a={className:"col-xs-4",type:"undefined"!=typeof o.lines[n].columns[2].control.type?"none"===o.lines[n].columns[2].control.type?"blank":o.lines[n].columns[2].control.type:"blank",key:"undefined"!=typeof o.lines[n].columns[2].control.key?o.lines[n].columns[2].control.key:"blank"+Date.now(),templateOptions:{type:O(o.lines[n].columns[2].control),label:b(o.lines[n].columns[2].control),required:k(o.lines[n].columns[2].control),placeholder:V(o.lines[n].columns[2].control),description:T(o.lines[n].columns[2].control),options:E(o.lines[n].columns[2].control)},expressionProperties:g(o.lines[n].columns[2].control),validators:h(o.lines[n].columns[2].control),validation:x(o.lines[n].columns[2].control)};"datepicker"===o.lines[n].columns[2].control.type&&m(a,o,n);var c=[];c.push("header"===o.lines[n].columns[0].control.type?t:i),c.push("header"===o.lines[n].columns[1].control.type?l:s),c.push("header"===o.lines[n].columns[2].control.type?r:a),e.push({className:"row",fieldGroup:c})}function b(e){return"undefined"!=typeof e.templateOptions&&"undefined"!=typeof e.templateOptions.label?e.templateOptions.label:""}function v(e){return"undefined"!=typeof e.templateOptions&&"undefined"!=typeof e.templateOptions.datepickerPopup?e.templateOptions.datepickerPopup:""}function g(e){return"undefined"!=typeof e.formlyExpressionProperties?angular.copy(e.formlyExpressionProperties):{}}function h(e){return"undefined"!=typeof e.formlyValidators?angular.copy(e.formlyValidators):{}}function x(e){return"undefined"!=typeof e.formlyValidation?angular.copy(e.formlyValidation):{}}function k(e){return"undefined"!=typeof e.templateOptions&&"undefined"!=typeof e.templateOptions.required?e.templateOptions.required:""}function E(e){return"undefined"!=typeof e.templateOptions&&"undefined"!=typeof e.templateOptions.options?e.templateOptions.options:""}function O(e){return"undefined"!=typeof e.subtype?e.subtype:""}function V(e){return"undefined"!=typeof e.templateOptions&&"undefined"!=typeof e.templateOptions.placeholder?e.templateOptions.placeholder:""}function T(e){return"undefined"!=typeof e.templateOptions&&"undefined"!=typeof e.templateOptions.description?e.templateOptions.description:""}function q(e){var o={};return angular.copy(o,e),!0}function w(e,o){var n={noError:!1,title:"",Message:""};return n.noError=!1,n.title=e,n.Message=o,n}function S(e,o){var n={noError:!1,title:"",Message:""};return n.noError=!0,n.title=e,n.Message=o,n}angular.module("eda.modelsTranslator.Service",[]).factory("modelsTranslator",e),e.$inject=[]}()}(this);
//# sourceMappingURL=eda.easyFormViewer.min.js.map